<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curso de Canvas: Canvas Pong</title>
<script src="Pad.js"></script>
<script src="Bola.js"></script>
<script src="Cpu.js"></script>
<script src="Placar.js"></script>

    <style>
        #desenho1{
            border: 1px solid black;
        }
        #btn{
            font: bold 12pt verdana;
            padding: 12px;
            border-radius: 8px;
        }
    </style>
</head>
<body>

    <canvas id="desenho1" width="1000" height="500">
        <h3>Seu broswer não dá suporte ao Canvas</h3>
    </canvas>
    <br/>
    <button onclick="bola.iniciar()" id="btn">Iniciar</button>

    
<script>


let pj1=0 
let pj2=0

let canvas = document.getElementById('desenho1')
let ctx = canvas.getContext('2d')

const teclado={
    baixo:false,
    cima:false,
    esquerda:false,
    direita:false
}

const jogador = new Pad(ctx,teclado)
const bola = new Bola(ctx,jogador)
const cpu = new Cpu(ctx,bola)
const placar = new Placar(ctx)


window.addEventListener('keydown',(event)=>{
    if(event.keyCode==37){
        teclado.esquerda=true
    }
    if(event.keyCode==38){
        teclado.cima=true 
    }
    if(event.keyCode==39){
        teclado.direita=true 
    }
    if(event.keyCode==40){
        teclado.baixo=true
    }
})

window.addEventListener('keyup',(event)=>{
    if(event.keyCode==37){
        teclado.esquerda=false
    }
    if(event.keyCode==38){
        teclado.cima=false 
    }
    if(event.keyCode==39){
        teclado.direita=false 
    }
    if(event.keyCode==40){
        teclado.baixo=false 
    }
    
    
})

const game =()=>{
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    jogador.desenhar()
    bola.desenhar()
    cpu.desenhar()
    placar.desenhar()

    requestAnimationFrame(game)
    
}

requestAnimationFrame(game)
 
    </script>
   
</body>
</html>